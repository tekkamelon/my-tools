#!/usr/bin/awk -f

BEGIN {

	# 区切り文字の処理
	if(ofs == ""){

		OFS ="," 

	}else{

		OFS = ofs

	}

}

# 2行目以外かつパイプを含む行を処理する
NR != 2 && /\|/ {

    # 先頭のパイプと周囲の空白を除去
    sub(/^[ \t]*\|[ \t]*/, "")
    # 末尾のパイプと周囲の空白を除去
    sub(/[ \t]*\|[ \t]*$/, "")
    # 残りのパイプ区切りを出力フィールド区切り子(カンマ)に置換
    gsub(/[ \t]*\|[ \t]*/, OFS)
    print

}
