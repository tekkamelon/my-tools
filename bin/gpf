#!/bin/sh

set -eu

# メニュー項目の定義
menu_items=$(cat <<- EOS
1:git commitの作成
2:READMEへの反映
3:READMEを添削
EOS
)

# 選択処理
selected=$(echo "$menu_items" | fzf --reverse --prompt="操作を選択 > " | cut -d":" -f1)

# 選択処理で受け取った変数に応じプロンプトを変数に代入
case "${selected}" in

    1)
        message="gitから変更点を確認し適切なコミットを作成してください。コミットの作成時に許可を得る必要はありません"
        ;;
    2)
        message="gitから変更点を確認し必要であればREADME.mdに追記してください"
        ;;
    3)
        message="README.mdの内容を添削し変更点を別ファイルに書き出してください"
        ;;
    *)
        exit 1
        ;;

esac

# gemini-cliに処理を委譲
gemini --yolo -p "${message}"

