#!/bin/sh -eu

# ====== 変数の設定 ======
# ロケールの設定
export LC_ALL=C
export LANG=C

# 現在のディレクトリ
current_dir=$(pwd)

# 引数で指定されたディレクトリ
working_dir="${*}"

# カバーアートのディレクトリ
coverart="albumart_backup"
# ====== 変数の設定ここまで ======


#引数があれば真
if [ -n "${working_dir}" ] ; then

	cd "${working_dir}"

	# 非対話的に処理,カバーアートを取得
	abcde -N -G -B

	# カバーアートのパスを取得
	albumart_dir=$(find ./ -d -name "${coverart}" 2> /dev/null)

	cd "${albumart_dir}"

	mv Folder.jpg ../

	cd ../

	rmdir "${coverart}"

else

	# エラーメッセージを出力
	echo "Error: please enter args" > /dev/stderr

fi

cd "${current_dir}"
