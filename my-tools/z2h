#!/bin/sh -eu

# 標準入力の有無を確認,あれば真,無ければ偽
if [ -p /dev/stdin ] ; then

	# 真の場合は標準入力を変数に代入,非対話的に処理
	input_string=$(cat - )

    echo "${input_string}" |
        
	# 全角英数,スペース,スラッシュ,その他記号をを半角に置換
	perl -C -Mutf8 -pe 'tr/０-９ａ-ｚＡ-Ｚ　／（）’”/0-9a-zA-Z \/\(\)'\''"/' 

else
    
	# 偽の場合は第1引数を変数に代入
	args="${1}"

    # 全角英数,スペース,その他記号をを半角に置換し上書き保存
	perl -C -Mutf8 -pe 'tr/０-９ａ-ｚＡ-Ｚ　／（）’”/0-9a-zA-Z \/\(\)'\''"/' -i "${args}"
	
fi

